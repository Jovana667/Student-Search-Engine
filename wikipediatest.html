<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wikipedia Article Search</title>
    <style>
        .article {
            margin-bottom: 20px;
        }
        .article h2 {
            margin-bottom: 10px;
        }
        .article p {
            margin-bottom: 5px;
        }
        .article iframe {
            width: 100%;
            height: 150px;
            border: none;
        }
        .article a {
            display: block;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Wikipedia Article Search</h1>
    <form id="search-form">
        <input type="text" id="search-query" placeholder="Enter a topic" required>
        <button type="submit">Search</button>
    </form>
    <div id="articles"></div>
    <button id="next-button" style="display:none;">Next</button>

    <script src="./Assets/js/wikipedia.js"></script>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wikipedia Article Search</title>
    <style>
        .article {
            margin-bottom: 20px;
        }
        .article h2 {
            margin-bottom: 10px;
        }
        .article p {
            margin-bottom: 5px;
        }
        .article iframe {
            width: 100%;
            height: 150px;
            border: none;
        }
        .article a {
            display: block;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Wikipedia Article Search</h1>
    <form id="search-form">
        <input type="text" id="search-query" placeholder="Enter a topic" required>
        <button type="submit">Search</button>
    </form>
    <div id="articles"></div>
    <button id="prev-button" style="display:none;">Previous</button>
    <button id="next-button" style="display:none;">Next</button>

    <script>
        let query = '';
        let allResults = [];
        let currentIndex = 0;
        const limit = 5;

        document.getElementById('search-form').addEventListener('submit', function(event) {
            event.preventDefault();
            query = document.getElementById('search-query').value;
            currentIndex = 0;
            fetchWikipediaSearch(query);
        });

        document.getElementById('prev-button').addEventListener('click', function() {
            currentIndex = Math.max(currentIndex - limit, 0);
            displaySearchResults(allResults.slice(currentIndex, currentIndex + limit));
            toggleButtons();
        });

        document.getElementById('next-button').addEventListener('click', function() {
            currentIndex = Math.min(currentIndex + limit, allResults.length - limit);
            displaySearchResults(allResults.slice(currentIndex, currentIndex + limit));
            toggleButtons();
        });

        async function fetchWikipediaSearch(query) {
            try {
                const url = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}&format=json&origin=*&srlimit=50`;
                const response = await fetch(url);
                const data = await response.json();
                allResults = data.query.search;
                displaySearchResults(allResults.slice(currentIndex, currentIndex + limit));
                toggleButtons();
            } catch (error) {
                console.error('Error fetching search results:', error);
            }
        }

        function displaySearchResults(articles) {
            const articlesContainer = document.getElementById('articles');
            articlesContainer.innerHTML = ''; // Clear previous results

            articles.forEach(article => {
                const articleElement = document.createElement('div');
                articleElement.className = 'article';
                articleElement.innerHTML = `
                    <h2>${article.title}</h2>
                    <iframe srcdoc="${truncateText(article.snippet, 300)}"></iframe>
                    <a href="https://en.wikipedia.org/?curid=${article.pageid}" target="_blank">Read the full article</a>
                `;
                articlesContainer.appendChild(articleElement);
            });
        }

        function truncateText(text, maxLength) {
            const doc = new DOMParser().parseFromString(text, "text/html");
            const plainText = doc.body.textContent || "";
            if (plainText.length > maxLength) {
                return plainText.substring(0, maxLength) + '...';
            }
            return plainText;
        }

        function toggleButtons() {
            document.getElementById('prev-button').style.display = currentIndex > 0 ? 'block' : 'none';
            document.getElementById('next-button').style.display = currentIndex + limit < allResults.length ? 'block' : 'none';
        }
    </script>
</body>
</html>
